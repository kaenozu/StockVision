# E2E Testing with Playwright

This document describes how to run and configure E2E tests using Playwright.

## Running Tests

To run E2E tests, use the following command:

```bash
npm run test:e2e
```

This will start the development server and run the tests.

## Environment Variables

You can customize the test execution by setting the following environment variables:

- `BASE_URL`: The base URL for the application. Defaults to `http://localhost:3000`.
- `PLAYWRIGHT_WORKERS`: The number of workers to use for running tests. Defaults to `2` in CI, `undefined` (use all CPU cores) locally.
- `PLAYWRIGHT_RETRIES`: The number of retries for failed tests. Defaults to `1` in CI, `0` locally.
- `PLAYWRIGHT_GLOBAL_TIMEOUT`: The global timeout for the whole test suite in milliseconds. Defaults to `300000` (5 minutes).
- `PLAYWRIGHT_WEBSERVER_TIMEOUT`: The timeout for starting the web server in milliseconds. Defaults to `120000` (2 minutes).
- `CI`: Set to `true` to enable CI mode. This affects the number of workers and retries.

Example:

```bash
BASE_URL=http://localhost:3001 PLAYWRIGHT_WORKERS=4 npm run test:e2e
```

## Test Structure

E2E tests are located in the `tests/e2e` directory. Each test file should end with `.spec.ts`.

## Debugging Tests

To debug tests, you can use the following command:

```bash
npm run test:e2e -- --debug
```

This will open the Playwright Inspector, which allows you to step through the test execution.

You can also use the following command to run a specific test file:

```bash
npm run test:e2e -- tests/e2e/homepage.spec.ts
```

## Reporting

Test results are reported in the following formats:

- HTML: `test-results/index.html`
- JUnit: `test-results/e2e-junit.xml`
- JSON: `test-results/e2e-results.json`

The HTML report is generated by default and can be opened in a browser.