import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{u as $,E as I,g as S,f as E,a as R,b as L,c as m}from"./ErrorMessage-DlAn-mka.js";import{L as M,I as w,B as T}from"./Button-B5GkW0LU.js";import"./index-0yr9KlQE.js";import"./stockApi-CSKHuUhm.js";function g({stockData:s,currentPrice:r,loading:v=!1,error:n=null,onRefresh:l,onViewDetails:o,showWatchlistControls:j=!0,compact:c=!1,className:i=""}){const q=s?.stock_code||r?.stock_code||"",a=$(q),t=r||s,W=s?.company_name||"",k=r?.market_status;if(v)return e.jsx("div",{className:`stock-card ${i}`,children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(M,{size:"lg",showMessage:!0,message:"Ê†™Âºè„Éá„Éº„Çø„ÇíÂèñÂæó‰∏≠..."})})});if(n)return e.jsx("div",{className:`stock-card ${i}`,children:e.jsx(I,{error:S(n),onRetry:l,retryText:"ÂÜçË™≠„ÅøËæº„Åø"})});if(!t)return e.jsx("div",{className:`stock-card ${i}`,children:e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Ê†™Âºè„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"})});const N=E(t.price_change),C=R(t.price_change_pct),d=k?L(k):null,D=async()=>{try{await a.toggleWatchlist()}catch(P){console.error("Failed to toggle watchlist:",P)}};return e.jsxs("div",{className:`stock-card ${c?"p-4":"p-6"} ${i}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`font-bold text-gray-900 ${c?"text-lg":"text-xl"}`,children:t.stock_code}),d&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:d.icon}),e.jsx("span",{className:`text-xs font-medium ${d.colorClass}`,children:d.text})]})]}),e.jsx("p",{className:`text-gray-600 truncate ${c?"text-sm":"text-base"}`,children:W})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx(w,{variant:"ghost",size:"sm",onClick:l,tooltip:"Êõ¥Êñ∞",children:"üîÑ"}),j&&e.jsx(w,{variant:a.isInWatchlist?"primary":"ghost",size:"sm",loading:a.isAdding||a.isRemoving,onClick:D,tooltip:a.isInWatchlist?"„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Åã„ÇâÂâäÈô§":"„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Å´ËøΩÂä†",children:a.isInWatchlist?"‚≠ê":"‚òÜ"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-baseline justify-between",children:e.jsx("div",{children:e.jsx("span",{className:`font-bold ${c?"text-2xl":"text-3xl"} text-gray-900`,children:m(t.current_price)})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${N.colorClass}`,children:N.formatted}),e.jsxs("span",{className:`font-medium ${C.colorClass}`,children:["(",C.formatted,")"]})]}),!c&&typeof t.previous_close=="number"&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ÂâçÊó•ÊØî: ",m(t.previous_close)]})]}),j&&a.isInWatchlist&&a.item&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[(a.item.alert_price_high!==null||a.item.alert_price_low!==null)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"„Ç¢„É©„Éº„Éà‰æ°Ê†º:"}),e.jsxs("span",{className:"font-medium",children:[a.item.alert_price_high!==null&&e.jsxs("span",{className:"text-green-600",children:["‚¨ÜÔ∏è ",m(a.item.alert_price_high)," "]}),a.item.alert_price_low!==null&&e.jsxs("span",{className:"text-red-600",children:["‚¨áÔ∏è ",m(a.item.alert_price_low)]})]})]}),a.item.notes&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"„É°„É¢: "}),e.jsx("span",{children:a.item.notes})]})]})}),a.hasError&&e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-sm text-red-600",children:[S(a.hasError),e.jsx("button",{onClick:a.clearError,className:"ml-2 text-red-500 underline hover:no-underline",children:"Èñâ„Åò„Çã"})]})})]}),!c&&o&&e.jsx("div",{className:"mt-6",children:e.jsx(T,{variant:"outline",fullWidth:!0,onClick:o,children:"Ë©≥Á¥∞„ÇíË¶ã„Çã"})})]})}function b({stockData:s,currentPrice:r,loading:v=!1,error:n=null,onClick:l,className:o=""}){return e.jsx("div",{className:`cursor-pointer hover:shadow-md transition-shadow ${o}`,onClick:l,children:e.jsx(g,{stockData:s,currentPrice:r,loading:v,error:n,compact:!0,showWatchlistControls:!1})})}function V({compact:s=!1,className:r=""}){return e.jsx("div",{className:`stock-card ${s?"p-4":"p-6"} ${r}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-20 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded"}),e.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-8 bg-gray-300 rounded w-32"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-5 bg-gray-300 rounded w-20"}),e.jsx("div",{className:"h-5 bg-gray-300 rounded w-16"})]})]}),!s&&e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"h-10 bg-gray-300 rounded"})})]})})}try{g.displayName="StockCard",g.__docgenInfo={description:"",displayName:"StockCard",props:{stockData:{defaultValue:null,description:"",name:"stockData",required:!1,type:{name:"StockData"}},currentPrice:{defaultValue:null,description:"",name:"currentPrice",required:!1,type:{name:"CurrentPriceResponse"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},error:{defaultValue:{value:"null"},description:"",name:"error",required:!1,type:{name:"string"}},onRefresh:{defaultValue:null,description:"",name:"onRefresh",required:!1,type:{name:"() => void"}},onViewDetails:{defaultValue:null,description:"",name:"onViewDetails",required:!1,type:{name:"() => void"}},showWatchlistControls:{defaultValue:{value:"true"},description:"",name:"showWatchlistControls",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},compact:{defaultValue:{value:"false"},description:"",name:"compact",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{b.displayName="CompactStockCard",b.__docgenInfo={description:"Compact Stock Card for lists",displayName:"CompactStockCard",props:{stockData:{defaultValue:null,description:"",name:"stockData",required:!1,type:{name:"StockData"}},currentPrice:{defaultValue:null,description:"",name:"currentPrice",required:!1,type:{name:"CurrentPriceResponse"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},error:{defaultValue:{value:"null"},description:"",name:"error",required:!1,type:{name:"string"}},onRefresh:{defaultValue:null,description:"",name:"onRefresh",required:!1,type:{name:"() => void"}},showWatchlistControls:{defaultValue:null,description:"",name:"showWatchlistControls",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"() => void"}}}}}catch{}try{V.displayName="StockCardSkeleton",V.__docgenInfo={description:"Stock Card Skeleton (for loading states)",displayName:"StockCardSkeleton",props:{compact:{defaultValue:{value:"false"},description:"",name:"compact",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Z={title:"Stock/StockCard",component:g,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{compact:{control:"boolean"},loading:{control:"boolean"},showWatchlistControls:{control:"boolean"}}},y={stock_code:"7203",company_name:"„Éà„É®„ÇøËá™ÂãïËªäÊ†™Âºè‰ºöÁ§æ",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,volume:1e6,market_cap:3e12,day_high:2550,day_low:2480,year_high:2800,year_low:2200,avg_volume:9e5,pe_ratio:15.5,dividend_yield:2.5},_={stock_code:"7203",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,timestamp:"2023-10-27T10:00:00Z",market_status:"open"},u={args:{stockData:y,currentPrice:_}},p={args:{loading:!0}},h={args:{error:"Failed to fetch stock data"}},f={args:{stockData:y,currentPrice:_,compact:!0}},x={args:{stockData:y,currentPrice:_,showWatchlistControls:!1}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice
  }
}`,...u.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...p.parameters?.docs?.source}}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    error: 'Failed to fetch stock data'
  }
}`,...h.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice,
    compact: true
  }
}`,...f.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice,
    showWatchlistControls: false
  }
}`,...x.parameters?.docs?.source}}};const G=["Default","Loading","Error","Compact","WithoutWatchlistControls"];export{f as Compact,u as Default,h as Error,p as Loading,x as WithoutWatchlistControls,G as __namedExportsOrder,Z as default};
