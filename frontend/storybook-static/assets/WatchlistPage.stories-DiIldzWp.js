import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-0yr9KlQE.js";import{d as R,v as H,I as L,e as $,s as A,h as J,i as K,c as N,f as B,a as Z,j as U}from"./ErrorMessage-DlAn-mka.js";import{s as X}from"./stockApi-CSKHuUhm.js";import{B as b,L as Y,I as w,a as M}from"./Button-B5GkW0LU.js";import{u as ee}from"./chunk-PVWAREVJ--AKJ3QBG.js";function Q(t,s=!1,n=!1,o=3e4){const[a,l]=i.useState({data:null,status:"idle",error:null}),d=i.useCallback(async(p,x=!1)=>{if(p){l(u=>({...u,status:"loading",error:null}));try{const u=await X.getCurrentPrice(p,x);l({data:u,status:"success",error:null})}catch(u){console.error("Failed to fetch current price:",u),l({data:null,status:"error",error:R(u)})}}},[]);i.useEffect(()=>{if(!t||!n)return;const p=setInterval(()=>{d(t,s)},o);return()=>clearInterval(p)},[t,s,n,o,d]),i.useEffect(()=>{t&&d(t,s)},[t,s,d]);const c=i.useCallback(()=>{t&&d(t,s)},[t,s,d]);return{...a,fetch:d,refresh:c,isLoading:a.status==="loading",isError:a.status==="error",isSuccess:a.status==="success"}}function te(t=500){const[s,n]=i.useState(""),[o,a]=i.useState("");return i.useEffect(()=>{const l=setTimeout(()=>{a(s)},t);return()=>clearTimeout(l)},[s,t]),{searchQuery:s,debouncedQuery:o,setSearchQuery:n,hasQuery:o.length>0,isSearching:s!==o}}function I({onSearch:t,loading:s=!1,disabled:n=!1,initialValue:o="",showRealDataOption:a=!0,placeholder:l="éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ› (ä¾‹: 7203)",className:d=""}){const[c,p]=i.useState({stock_code:o,use_real_data:!1}),[x,u]=i.useState({is_valid:!0,errors:[],warnings:[]}),[g,v]=i.useState(!1),{setSearchQuery:j,isSearching:f}=te(300),m=i.useCallback(h=>{const y=H(h);return u(y),y.is_valid},[]),r=h=>{const y=h.target.value,C=A(y),z={...c,stock_code:C};p(z),j(C),g&&m(z)},_=h=>{const y={...c,use_real_data:h.target.checked};p(y),g&&m(y)},V=h=>{if(h.preventDefault(),v(!0),m(c)&&c.stock_code){const C=$(c.stock_code);t(C,c.use_real_data)}},W=()=>{v(!0),m(c)},k=[{code:"7203",name:"ãƒˆãƒ¨ã‚¿"},{code:"6758",name:"ã‚½ãƒ‹ãƒ¼"},{code:"9984",name:"ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯"},{code:"6861",name:"ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹"}],O=h=>{const y={...c,stock_code:h};p(y),j(h),t(h,c.use_real_data)},S=g&&x.errors.length>0,q=g&&x.warnings.length>0;return e.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 p-6 ${d}`,children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"æ ªå¼æ¤œç´¢"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4æ¡ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ ªä¾¡æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"stock-code",type:"text",value:c.stock_code,onChange:r,onBlur:W,placeholder:l,maxLength:4,disabled:n,className:`
                w-full px-4 py-3 border rounded-lg text-lg font-mono
                focus:outline-none focus:ring-2 focus:border-transparent
                ${S?"border-red-300 focus:ring-red-500":q?"border-yellow-300 focus:ring-yellow-500":"border-gray-300 focus:ring-blue-500"}
                ${n?"bg-gray-100 cursor-not-allowed":"bg-white"}
              `}),f&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})]}),S&&e.jsx(L,{error:x.errors.join(" / "),className:"mt-1"}),q&&!S&&e.jsx("div",{className:"mt-1 text-yellow-600 text-sm",children:x.warnings.join(" / ")})]}),a&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"use-real-data",type:"checkbox",checked:c.use_real_data,onChange:_,disabled:n,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"use-real-data",className:"ml-2 text-sm text-gray-700",children:["ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹",e.jsx("span",{className:"text-gray-500 ml-1",children:"(å¿œç­”ãŒé…ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™)"})]})]}),e.jsx(b,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:s,disabled:n||!c.stock_code||S,className:"font-medium",children:s?"æ¤œç´¢ä¸­...":"æ ªä¾¡ã‚’å–å¾—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ã‚¯ã‚¤ãƒƒã‚¯æ¤œç´¢"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(h=>e.jsxs("button",{type:"button",onClick:()=>O(h.code),disabled:n||s,className:`
                  px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 
                  text-gray-700 rounded-full transition-colors
                  disabled:opacity-50 disabled:cursor-not-allowed
                  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                `,children:[h.code," - ",h.name]},h.code))})]})]})})}function G({onSearch:t,loading:s=!1,disabled:n=!1,className:o=""}){const[a,l]=i.useState(""),[d,c]=i.useState(!1),p=u=>{const g=A(u.target.value);l(g),c(g.length===4&&/^[0-9]{4}$/.test(g))},x=u=>{u.preventDefault(),d&&a&&t($(a),!1)};return e.jsxs("form",{onSubmit:x,className:`flex gap-2 ${o}`,children:[e.jsx("input",{type:"text",value:a,onChange:p,placeholder:"éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰",maxLength:4,disabled:n,className:`
          px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono
          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
          disabled:bg-gray-100 disabled:cursor-not-allowed
          w-24
        `}),e.jsx(b,{type:"submit",variant:"primary",size:"sm",loading:s,disabled:n||!d,children:"æ¤œç´¢"})]})}try{I.displayName="StockSearch",I.__docgenInfo={description:"",displayName:"StockSearch",props:{onSearch:{defaultValue:null,description:"",name:"onSearch",required:!0,type:{name:"(stockCode: string, useRealData: boolean) => void"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},initialValue:{defaultValue:{value:""},description:"",name:"initialValue",required:!1,type:{name:"string"}},showRealDataOption:{defaultValue:{value:"true"},description:"",name:"showRealDataOption",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},placeholder:{defaultValue:{value:"éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ› (ä¾‹: 7203)"},description:"",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{G.displayName="CompactStockSearch",G.__docgenInfo={description:"Compact Stock Search (for navigation bars, etc.)",displayName:"CompactStockSearch",props:{loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!0,type:{name:"(stockCode: string, useRealData: boolean) => void"}}}}}catch{}function D({item:t,isOpen:s,onClose:n,onSave:o,isSaving:a=!1}){const[l,d]=i.useState(t.alert_price_high?.toString()||""),[c,p]=i.useState(t.alert_price_low?.toString()||""),[x,u]=i.useState(t.notes||""),[g,v]=i.useState(null);i.useEffect(()=>{s&&(d(t.alert_price_high?.toString()||""),p(t.alert_price_low?.toString()||""),u(t.notes||""),v(null))},[s,t]);const j=async f=>{f.preventDefault(),v(null);try{const m=l?parseFloat(l):null,r=c?parseFloat(c):null;if(m!==null&&isNaN(m))throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(r!==null&&isNaN(r))throw new Error("å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(m!==null&&m<=0)throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(r!==null&&r<=0)throw new Error("å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(m!==null&&r!==null&&m<=r)throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");await o(t.stock_code,m,r,x||null),n()}catch(m){v(m instanceof Error?m.message:"ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š - ",t.stock_code," ",t.company_name]})}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[g&&e.jsx(L,{error:g}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alert-price-high",className:"block text-sm font-medium text-gray-700 mb-1",children:"é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼"}),e.jsx("input",{id:"alert-price-high",type:"number",step:"0.01",min:"0",value:l,onChange:f=>d(f.target.value),placeholder:"ä¾‹: 5000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"æ ªä¾¡ãŒã“ã®ä¾¡æ ¼ä»¥ä¸Šã«ãªã£ãŸã¨ãã«é€šçŸ¥ã—ã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alert-price-low",className:"block text-sm font-medium text-gray-700 mb-1",children:"å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼"}),e.jsx("input",{id:"alert-price-low",type:"number",step:"0.01",min:"0",value:c,onChange:f=>p(f.target.value),placeholder:"ä¾‹: 3000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"æ ªä¾¡ãŒã“ã®ä¾¡æ ¼ä»¥ä¸‹ã«ãªã£ãŸã¨ãã«é€šçŸ¥ã—ã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"ãƒ¡ãƒ¢"}),e.jsx("textarea",{id:"notes",value:x,onChange:f=>u(f.target.value),placeholder:"ã“ã®éŠ˜æŸ„ã«ã¤ã„ã¦ã®ãƒ¡ãƒ¢...",rows:3,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 text-right",children:[x.length,"/500"]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx(b,{type:"button",variant:"outline",onClick:n,disabled:a,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(b,{type:"submit",variant:"primary",loading:a,disabled:a,children:"ä¿å­˜"})]})]})]})}):null}try{D.displayName="EditWatchlistItemModal",D.__docgenInfo={description:"",displayName:"EditWatchlistItemModal",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"WatchlistItem"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"enum",value:[{value:"false"},{value:"true"}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!0,type:{name:"(stockCode: string, alertPriceHigh: number, alertPriceLow: number, notes: string) => Promise<void>"}},isSaving:{defaultValue:{value:"false"},description:"",name:"isSaving",required:!1,type:{name:"enum",value:[{value:"false"},{value:"true"}]}}}}}catch{}function se(){const t=ee(),s=J(),[n,o]=i.useState(!1),[a,l]=i.useState(!1),[d,c]=i.useState(null),[p,x]=i.useState(!1),u=async r=>{l(!0);try{await s.addToWatchlist({stock_code:r}),o(!1)}catch(_){console.error("Failed to add to watchlist:",_)}finally{l(!1)}},g=async r=>{try{await s.removeFromWatchlist(r)}catch(_){console.error("Failed to remove from watchlist:",_)}},v=r=>{t(`/stock/${r}`)},j=r=>{c(r)},f=()=>{c(null)},m=async(r,_,V,W)=>{x(!0);try{await s.removeFromWatchlist(r),await s.addToWatchlist({stock_code:r,alert_price_high:_,alert_price_low:V,notes:W})}catch(k){throw console.error("Failed to update watchlist item:",k),k}finally{x(!1)}};return s.isLoading?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"}),e.jsx(Y,{size:"lg",showMessage:!0,message:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆã‚’å–å¾—ä¸­..."})]})}):s.isError?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"})}),e.jsx(L,{error:s.error}),e.jsx("div",{className:"text-center",children:e.jsx(b,{variant:"primary",onClick:s.refresh,children:"å†èª­ã¿è¾¼ã¿"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ç™»éŒ²ã—ãŸéŠ˜æŸ„ã®ä¾¡æ ¼å¤‰å‹•ã‚’è¿½è·¡ã§ãã¾ã™"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{variant:"outline",onClick:s.refresh,icon:"ğŸ”„",disabled:s.isLoading,children:"æ›´æ–°"}),e.jsx(b,{variant:"primary",onClick:()=>o(!n),icon:"+",children:"éŠ˜æŸ„ã‚’è¿½åŠ "})]})]}),s.items.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸ“Š"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.items.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"ç™»éŒ²éŠ˜æŸ„æ•°"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸš¨"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.getWatchlistStats().itemsWithAlerts}),e.jsx("div",{className:"text-sm text-gray-600",children:"ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šæ•°"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸ“"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.getWatchlistStats().itemsWithNotes}),e.jsx("div",{className:"text-sm text-gray-600",children:"ãƒ¡ãƒ¢ä»˜ãéŠ˜æŸ„æ•°"})]})]})})]}),n&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"éŠ˜æŸ„ã‚’ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆã«è¿½åŠ "}),e.jsx(w,{variant:"ghost",onClick:()=>o(!1),size:"sm",children:"âœ•"})]}),e.jsx(I,{onSearch:u,loading:a,placeholder:"è¿½åŠ ã™ã‚‹éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›",showRealDataOption:!1})]}),s.isEmpty?e.jsx(K,{title:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆãŒç©ºã§ã™",description:"æ°—ã«ãªã‚‹éŠ˜æŸ„ã‚’è¿½åŠ ã—ã¦ä¾¡æ ¼å¤‰å‹•ã‚’è¿½è·¡ã—ã¾ã—ã‚‡ã†",icon:"â­",action:()=>o(!0),actionText:"éŠ˜æŸ„ã‚’è¿½åŠ "}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"éŠ˜æŸ„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ç¾åœ¨ä¾¡æ ¼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å¤‰å‹•"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ã‚¢ãƒ©ãƒ¼ãƒˆ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"è¿½åŠ æ—¥"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.items.map(r=>e.jsx(ae,{item:r,onStockClick:v,onRemove:g,onEdit:j},r.stock_code))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:s.items.map(r=>e.jsx(re,{item:r,onStockClick:v,onRemove:g,onEdit:j},r.stock_code))})]}),d&&e.jsx(D,{item:d,isOpen:!!d,onClose:f,onSave:m,isSaving:p})]})}function ae({item:t,onStockClick:s,onRemove:n,onEdit:o}){const a=Q(t.stock_code,!1);return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>s(t.stock_code),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.stock_code}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-32",children:t.company_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.isLoading?e.jsx(M,{lines:1}):a.data?e.jsx("div",{className:"text-sm font-medium text-gray-900",children:N(a.data.current_price)}):e.jsx("div",{className:"text-sm text-gray-400",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.data&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-sm font-medium ${a.data.price_change>=0?"text-green-600":"text-red-600"}`,children:B(a.data.price_change).formatted}),e.jsx("span",{className:`text-xs ${a.data.price_change_pct>=0?"text-green-600":"text-red-600"}`,children:Z(a.data.price_change_pct).formatted})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex flex-col",children:[t.alert_price_high!==null&&e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx("span",{className:"mr-1",children:"â¬†ï¸"}),N(t.alert_price_high)]}),t.alert_price_low!==null&&e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx("span",{className:"mr-1",children:"â¬‡ï¸"}),N(t.alert_price_low)]}),t.alert_price_high===null&&t.alert_price_low===null&&e.jsx("span",{className:"text-gray-400",children:"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(t.added_date).split(" ")[0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation(),o(t)},tooltip:"ç·¨é›†",children:"âœï¸"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation(),n(t.stock_code)},tooltip:"å‰Šé™¤",children:"ğŸ—‘ï¸"})]})})]})}function re({item:t,onStockClick:s,onRemove:n,onEdit:o}){const a=Q(t.stock_code,!1);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(t.stock_code),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.stock_code}),(t.alert_price_high!==null||t.alert_price_low!==null)&&e.jsx("span",{className:"text-yellow-600 text-sm",children:"ğŸš¨"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate mb-3",children:t.company_name}),a.isLoading?e.jsx(M,{lines:1}):a.data?e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:N(a.data.current_price)}),e.jsxs("span",{className:`text-sm font-medium ${a.data.price_change>=0?"text-green-600":"text-red-600"}`,children:[B(a.data.price_change).formatted,"(",Z(a.data.price_change_pct).formatted,")"]})]}):e.jsx("div",{className:"text-gray-400",children:"ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ãªã—"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.alert_price_high!==null&&e.jsxs("div",{className:"flex items-center text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"mr-1",children:"â¬†ï¸"}),N(t.alert_price_high)]}),t.alert_price_low!==null&&e.jsxs("div",{className:"flex items-center text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"mr-1",children:"â¬‡ï¸"}),N(t.alert_price_low)]})]}),t.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:["ğŸ“ ",t.notes]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation(),o(t)},tooltip:"ç·¨é›†",children:"âœï¸"}),e.jsx(w,{variant:"ghost",size:"sm",onClick:l=>{l.stopPropagation(),n(t.stock_code)},tooltip:"å‰Šé™¤",children:"ğŸ—‘ï¸"})]})]})})}const ue={title:"Pages/WatchlistPage",component:se,parameters:{layout:"fullscreen"},tags:["autodocs"]},E={args:{}},T={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:new Promise(t=>setTimeout(()=>t([]),2e3))}]}},F={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:[{id:1,stock_code:"7203",notes:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",created_at:"2023-10-27T10:00:00Z",alert_price_high:2600,alert_price_low:2400},{id:2,stock_code:"9984",notes:"ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—",created_at:"2023-10-27T10:00:00Z",alert_price_high:null,alert_price_low:1100}]},{url:"http://localhost:8000/api/stocks/7203/current",method:"GET",status:200,response:{stock_code:"7203",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,timestamp:"2023-10-27T10:00:00Z",market_status:"open"}},{url:"http://localhost:8000/api/stocks/9984/current",method:"GET",status:200,response:{stock_code:"9984",current_price:1200,previous_close:1250,price_change:-50,price_change_pct:-4,timestamp:"2023-10-27T10:00:00Z",market_status:"open"}}]}},P={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:[]}]}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...E.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: new Promise(resolve => setTimeout(() => resolve([]), 2000))
    }]
  }
}`,...T.parameters?.docs?.source}}};F.parameters={...F.parameters,docs:{...F.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: [{
        id: 1,
        stock_code: '7203',
        notes: 'ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š',
        created_at: '2023-10-27T10:00:00Z',
        alert_price_high: 2600.0,
        alert_price_low: 2400.0
      }, {
        id: 2,
        stock_code: '9984',
        notes: 'ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—',
        created_at: '2023-10-27T10:00:00Z',
        alert_price_high: null,
        alert_price_low: 1100.0
      }]
    }, {
      url: 'http://localhost:8000/api/stocks/7203/current',
      method: 'GET',
      status: 200,
      response: {
        stock_code: '7203',
        current_price: 2500.5,
        previous_close: 2450.0,
        price_change: 50.5,
        price_change_pct: 2.06,
        timestamp: '2023-10-27T10:00:00Z',
        market_status: 'open'
      }
    }, {
      url: 'http://localhost:8000/api/stocks/9984/current',
      method: 'GET',
      status: 200,
      response: {
        stock_code: '9984',
        current_price: 1200.0,
        previous_close: 1250.0,
        price_change: -50.0,
        price_change_pct: -4.0,
        timestamp: '2023-10-27T10:00:00Z',
        market_status: 'open'
      }
    }]
  }
}`,...F.parameters?.docs?.source}}};P.parameters={...P.parameters,docs:{...P.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: []
    }]
  }
}`,...P.parameters?.docs?.source}}};const me=["Default","Loading","WithItems","Empty"];export{E as Default,P as Empty,T as Loading,F as WithItems,me as __namedExportsOrder,ue as default};
