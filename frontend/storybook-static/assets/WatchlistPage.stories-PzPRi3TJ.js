import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as c}from"./index-0yr9KlQE.js";import{d as B,v as H,I as L,e as R,s as O,h as J,i as K,c as b,f as V,a as z,j as U}from"./ErrorMessage-D6GXPr5r.js";import{s as X}from"./stockApi-Cf11MmaB.js";import{B as w,L as Y,I as N,a as G}from"./Button-CVhWGd89.js";import{u as ee}from"./chunk-PVWAREVJ--AKJ3QBG.js";function A(t,s=!1,i=!1,o=3e4){const[a,n]=c.useState({data:null,status:"idle",error:null}),m=c.useCallback(async(h,p=!1)=>{if(h){n(x=>({...x,status:"loading",error:null}));try{const x=await X.getCurrentPrice(h,p);n({data:x,status:"success",error:null})}catch(x){console.error("Failed to fetch current price:",x),n({data:null,status:"error",error:B(x)})}}},[]);c.useEffect(()=>{if(!t||!i)return;const h=setInterval(()=>{m(t,s)},o);return()=>clearInterval(h)},[t,s,i,o,m]),c.useEffect(()=>{t&&m(t,s)},[t,s,m]);const l=c.useCallback(()=>{t&&m(t,s)},[t,s,m]);return{...a,fetch:m,refresh:l,isLoading:a.status==="loading",isError:a.status==="error",isSuccess:a.status==="success"}}function te(t=500){const[s,i]=c.useState(""),[o,a]=c.useState("");return c.useEffect(()=>{const n=setTimeout(()=>{a(s)},t);return()=>clearTimeout(n)},[s,t]),{searchQuery:s,debouncedQuery:o,setSearchQuery:i,hasQuery:o.length>0,isSearching:s!==o}}function Z({onSearch:t,loading:s=!1,disabled:i=!1,initialValue:o="",showRealDataOption:a=!0,placeholder:n="éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ› (ä¾‹: 7203)",className:m=""}){const[l,h]=c.useState({stock_code:o,use_real_data:!1}),[p,x]=c.useState({is_valid:!0,errors:[],warnings:[]}),[f,j]=c.useState(!1),{setSearchQuery:_,isSearching:g}=te(300),d=c.useCallback(u=>{const y=H(u);return x(y),y.is_valid},[]),r=u=>{const y=u.target.value,E=O(y),q={...l,stock_code:E};h(q),_(E),f&&d(q)},v=u=>{const y={...l,use_real_data:u.target.checked};h(y),f&&d(y)},F=u=>{if(u.preventDefault(),j(!0),d(l)&&l.stock_code){const E=R(l.stock_code);t(E,l.use_real_data)}},I=()=>{j(!0),d(l)},k=[{code:"7203",name:"ãƒˆãƒ¨ã‚¿"},{code:"6758",name:"ã‚½ãƒ‹ãƒ¼"},{code:"9984",name:"ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯"},{code:"6861",name:"ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹"}],M=u=>{const y={...l,stock_code:u};h(y),_(u),t(u,l.use_real_data)},S=f&&p.errors.length>0,D=f&&p.warnings.length>0;return e.jsx("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 p-6 ${m}`,children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"æ ªå¼æ¤œç´¢"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4æ¡ã®éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ ªä¾¡æƒ…å ±ã‚’å–å¾—ã§ãã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock-code",className:"block text-sm font-medium text-gray-700 mb-2",children:"éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"stock-code",type:"text",value:l.stock_code,onChange:r,onBlur:I,placeholder:n,maxLength:4,disabled:i,className:`
                w-full px-4 py-3 border rounded-lg text-lg font-mono
                focus:outline-none focus:ring-2 focus:border-transparent
                ${S?"border-red-300 focus:ring-red-500":D?"border-yellow-300 focus:ring-yellow-500":"border-gray-300 focus:ring-blue-500"}
                ${i?"bg-gray-100 cursor-not-allowed":"bg-white"}
              `}),g&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})})]}),S&&e.jsx(L,{error:p.errors.join(" / "),className:"mt-1"}),D&&!S&&e.jsx("div",{className:"mt-1 text-yellow-600 text-sm",children:p.warnings.join(" / ")})]}),a&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"use-real-data",type:"checkbox",checked:l.use_real_data,onChange:v,disabled:i,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"use-real-data",className:"ml-2 text-sm text-gray-700",children:["ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹",e.jsx("span",{className:"text-gray-500 ml-1",children:"(å¿œç­”ãŒé…ããªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™)"})]})]}),e.jsx(w,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:s,disabled:i||!l.stock_code||S,className:"font-medium",children:s?"æ¤œç´¢ä¸­...":"æ ªä¾¡ã‚’å–å¾—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ã‚¯ã‚¤ãƒƒã‚¯æ¤œç´¢"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(u=>e.jsxs("button",{type:"button",onClick:()=>M(u.code),disabled:i||s,className:`
                  px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 
                  text-gray-700 rounded-full transition-colors
                  disabled:opacity-50 disabled:cursor-not-allowed
                  focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                `,children:[u.code," - ",u.name]},u.code))})]})]})})}Z.__docgenInfo={description:"",methods:[],displayName:"StockSearch",props:{onSearch:{required:!0,tsType:{name:"signature",type:"function",raw:"(stockCode: string, useRealData: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"stockCode"},{type:{name:"boolean"},name:"useRealData"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},initialValue:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},showRealDataOption:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ› (ä¾‹: 7203)'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};function Q({item:t,isOpen:s,onClose:i,onSave:o,isSaving:a=!1}){const[n,m]=c.useState(t.alert_price_high?.toString()||""),[l,h]=c.useState(t.alert_price_low?.toString()||""),[p,x]=c.useState(t.notes||""),[f,j]=c.useState(null);c.useEffect(()=>{s&&(m(t.alert_price_high?.toString()||""),h(t.alert_price_low?.toString()||""),x(t.notes||""),j(null))},[s,t]);const _=async g=>{g.preventDefault(),j(null);try{const d=n?parseFloat(n):null,r=l?parseFloat(l):null;if(d!==null&&isNaN(d))throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(r!==null&&isNaN(r))throw new Error("å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„");if(d!==null&&d<=0)throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(r!==null&&r<=0)throw new Error("å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");if(d!==null&&r!==null&&d<=r)throw new Error("é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã¯å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");await o(t.stock_code,d,r,p||null),i()}catch(d){j(d instanceof Error?d.message:"ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š - ",t.stock_code," ",t.company_name]})}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[f&&e.jsx(L,{error:f}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alert-price-high",className:"block text-sm font-medium text-gray-700 mb-1",children:"é«˜å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼"}),e.jsx("input",{id:"alert-price-high",type:"number",step:"0.01",min:"0",value:n,onChange:g=>m(g.target.value),placeholder:"ä¾‹: 5000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"æ ªä¾¡ãŒã“ã®ä¾¡æ ¼ä»¥ä¸Šã«ãªã£ãŸã¨ãã«é€šçŸ¥ã—ã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"alert-price-low",className:"block text-sm font-medium text-gray-700 mb-1",children:"å®‰å€¤ã‚¢ãƒ©ãƒ¼ãƒˆä¾¡æ ¼"}),e.jsx("input",{id:"alert-price-low",type:"number",step:"0.01",min:"0",value:l,onChange:g=>h(g.target.value),placeholder:"ä¾‹: 3000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"æ ªä¾¡ãŒã“ã®ä¾¡æ ¼ä»¥ä¸‹ã«ãªã£ãŸã¨ãã«é€šçŸ¥ã—ã¾ã™"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"ãƒ¡ãƒ¢"}),e.jsx("textarea",{id:"notes",value:p,onChange:g=>x(g.target.value),placeholder:"ã“ã®éŠ˜æŸ„ã«ã¤ã„ã¦ã®ãƒ¡ãƒ¢...",rows:3,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 text-right",children:[p.length,"/500"]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx(w,{type:"button",variant:"outline",onClick:i,disabled:a,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(w,{type:"submit",variant:"primary",loading:a,disabled:a,children:"ä¿å­˜"})]})]})]})}):null}Q.__docgenInfo={description:"",methods:[],displayName:"EditWatchlistItemModal",props:{item:{required:!0,tsType:{name:"WatchlistItem"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(stockCode: string, alertPriceHigh: number | null, alertPriceLow: number | null, notes: string | null) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"stockCode"},{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"alertPriceHigh"},{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"alertPriceLow"},{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"notes"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},isSaving:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};function $(){const t=ee(),s=J(),[i,o]=c.useState(!1),[a,n]=c.useState(!1),[m,l]=c.useState(null),[h,p]=c.useState(!1),x=async r=>{n(!0);try{await s.addToWatchlist({stock_code:r}),o(!1)}catch(v){console.error("Failed to add to watchlist:",v)}finally{n(!1)}},f=async r=>{try{await s.removeFromWatchlist(r)}catch(v){console.error("Failed to remove from watchlist:",v)}},j=r=>{t(`/stock/${r}`)},_=r=>{l(r)},g=()=>{l(null)},d=async(r,v,F,I)=>{p(!0);try{await s.removeFromWatchlist(r),await s.addToWatchlist({stock_code:r,alert_price_high:v,alert_price_low:F,notes:I})}catch(k){throw console.error("Failed to update watchlist item:",k),k}finally{p(!1)}};return s.isLoading?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"}),e.jsx(Y,{size:"lg",showMessage:!0,message:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆã‚’å–å¾—ä¸­..."})]})}):s.isError?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"})}),e.jsx(L,{error:s.error}),e.jsx("div",{className:"text-center",children:e.jsx(w,{variant:"primary",onClick:s.refresh,children:"å†èª­ã¿è¾¼ã¿"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆ"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ç™»éŒ²ã—ãŸéŠ˜æŸ„ã®ä¾¡æ ¼å¤‰å‹•ã‚’è¿½è·¡ã§ãã¾ã™"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{variant:"outline",onClick:s.refresh,icon:"ğŸ”„",disabled:s.isLoading,children:"æ›´æ–°"}),e.jsx(w,{variant:"primary",onClick:()=>o(!i),icon:"+",children:"éŠ˜æŸ„ã‚’è¿½åŠ "})]})]}),s.items.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸ“Š"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.items.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"ç™»éŒ²éŠ˜æŸ„æ•°"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸš¨"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.getWatchlistStats().itemsWithAlerts}),e.jsx("div",{className:"text-sm text-gray-600",children:"ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šæ•°"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"ğŸ“"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.getWatchlistStats().itemsWithNotes}),e.jsx("div",{className:"text-sm text-gray-600",children:"ãƒ¡ãƒ¢ä»˜ãéŠ˜æŸ„æ•°"})]})]})})]}),i&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"éŠ˜æŸ„ã‚’ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆã«è¿½åŠ "}),e.jsx(N,{variant:"ghost",onClick:()=>o(!1),size:"sm",children:"âœ•"})]}),e.jsx(Z,{onSearch:x,loading:a,placeholder:"è¿½åŠ ã™ã‚‹éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›",showRealDataOption:!1})]}),s.isEmpty?e.jsx(K,{title:"ã‚¦ã‚©ãƒƒãƒãƒªã‚¹ãƒˆãŒç©ºã§ã™",description:"æ°—ã«ãªã‚‹éŠ˜æŸ„ã‚’è¿½åŠ ã—ã¦ä¾¡æ ¼å¤‰å‹•ã‚’è¿½è·¡ã—ã¾ã—ã‚‡ã†",icon:"â­",action:()=>o(!0),actionText:"éŠ˜æŸ„ã‚’è¿½åŠ "}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"éŠ˜æŸ„"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ç¾åœ¨ä¾¡æ ¼"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"å¤‰å‹•"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ã‚¢ãƒ©ãƒ¼ãƒˆ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"è¿½åŠ æ—¥"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"æ“ä½œ"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.items.map(r=>e.jsx(se,{item:r,onStockClick:j,onRemove:f,onEdit:_},r.stock_code))})]})})}),e.jsx("div",{className:"md:hidden space-y-4",children:s.items.map(r=>e.jsx(ae,{item:r,onStockClick:j,onRemove:f,onEdit:_},r.stock_code))})]}),m&&e.jsx(Q,{item:m,isOpen:!!m,onClose:g,onSave:d,isSaving:h})]})}function se({item:t,onStockClick:s,onRemove:i,onEdit:o}){const a=A(t.stock_code,!1);return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>s(t.stock_code),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.stock_code}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-32",children:t.company_name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.isLoading?e.jsx(G,{lines:1}):a.data?e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b(a.data.current_price)}):e.jsx("div",{className:"text-sm text-gray-400",children:"â€”"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.data&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-sm font-medium ${a.data.price_change>=0?"text-green-600":"text-red-600"}`,children:V(a.data.price_change).formatted}),e.jsx("span",{className:`text-xs ${a.data.price_change_pct>=0?"text-green-600":"text-red-600"}`,children:z(a.data.price_change_pct).formatted})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex flex-col",children:[t.alert_price_high!==null&&e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx("span",{className:"mr-1",children:"â¬†ï¸"}),b(t.alert_price_high)]}),t.alert_price_low!==null&&e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx("span",{className:"mr-1",children:"â¬‡ï¸"}),b(t.alert_price_low)]}),t.alert_price_high===null&&t.alert_price_low===null&&e.jsx("span",{className:"text-gray-400",children:"â€”"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(t.added_date).split(" ")[0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),o(t)},tooltip:"ç·¨é›†",children:"âœï¸"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),i(t.stock_code)},tooltip:"å‰Šé™¤",children:"ğŸ—‘ï¸"})]})})]})}function ae({item:t,onStockClick:s,onRemove:i,onEdit:o}){const a=A(t.stock_code,!1);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(t.stock_code),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.stock_code}),(t.alert_price_high!==null||t.alert_price_low!==null)&&e.jsx("span",{className:"text-yellow-600 text-sm",children:"ğŸš¨"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate mb-3",children:t.company_name}),a.isLoading?e.jsx(G,{lines:1}):a.data?e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:b(a.data.current_price)}),e.jsxs("span",{className:`text-sm font-medium ${a.data.price_change>=0?"text-green-600":"text-red-600"}`,children:[V(a.data.price_change).formatted,"(",z(a.data.price_change_pct).formatted,")"]})]}):e.jsx("div",{className:"text-gray-400",children:"ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ãªã—"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.alert_price_high!==null&&e.jsxs("div",{className:"flex items-center text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"mr-1",children:"â¬†ï¸"}),b(t.alert_price_high)]}),t.alert_price_low!==null&&e.jsxs("div",{className:"flex items-center text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:[e.jsx("span",{className:"mr-1",children:"â¬‡ï¸"}),b(t.alert_price_low)]})]}),t.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:["ğŸ“ ",t.notes]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),o(t)},tooltip:"ç·¨é›†",children:"âœï¸"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),i(t.stock_code)},tooltip:"å‰Šé™¤",children:"ğŸ—‘ï¸"})]})]})})}$.__docgenInfo={description:"",methods:[],displayName:"WatchlistPage"};const de={title:"Pages/WatchlistPage",component:$,parameters:{layout:"fullscreen"},tags:["autodocs"]},T={args:{}},C={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:new Promise(t=>setTimeout(()=>t([]),2e3))}]}},P={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:[{id:1,stock_code:"7203",notes:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",created_at:"2023-10-27T10:00:00Z",alert_price_high:2600,alert_price_low:2400},{id:2,stock_code:"9984",notes:"ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—",created_at:"2023-10-27T10:00:00Z",alert_price_high:null,alert_price_low:1100}]},{url:"http://localhost:8000/api/stocks/7203/current",method:"GET",status:200,response:{stock_code:"7203",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,timestamp:"2023-10-27T10:00:00Z",market_status:"open"}},{url:"http://localhost:8000/api/stocks/9984/current",method:"GET",status:200,response:{stock_code:"9984",current_price:1200,previous_close:1250,price_change:-50,price_change_pct:-4,timestamp:"2023-10-27T10:00:00Z",market_status:"open"}}]}},W={args:{},parameters:{mockData:[{url:"http://localhost:8000/api/watchlist",method:"GET",status:200,response:[]}]}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...T.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: new Promise(resolve => setTimeout(() => resolve([]), 2000))
    }]
  }
}`,...C.parameters?.docs?.source}}};P.parameters={...P.parameters,docs:{...P.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: [{
        id: 1,
        stock_code: '7203',
        notes: 'ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š',
        created_at: '2023-10-27T10:00:00Z',
        alert_price_high: 2600.0,
        alert_price_low: 2400.0
      }, {
        id: 2,
        stock_code: '9984',
        notes: 'ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—',
        created_at: '2023-10-27T10:00:00Z',
        alert_price_high: null,
        alert_price_low: 1100.0
      }]
    }, {
      url: 'http://localhost:8000/api/stocks/7203/current',
      method: 'GET',
      status: 200,
      response: {
        stock_code: '7203',
        current_price: 2500.5,
        previous_close: 2450.0,
        price_change: 50.5,
        price_change_pct: 2.06,
        timestamp: '2023-10-27T10:00:00Z',
        market_status: 'open'
      }
    }, {
      url: 'http://localhost:8000/api/stocks/9984/current',
      method: 'GET',
      status: 200,
      response: {
        stock_code: '9984',
        current_price: 1200.0,
        previous_close: 1250.0,
        price_change: -50.0,
        price_change_pct: -4.0,
        timestamp: '2023-10-27T10:00:00Z',
        market_status: 'open'
      }
    }]
  }
}`,...P.parameters?.docs?.source}}};W.parameters={...W.parameters,docs:{...W.parameters?.docs,source:{originalSource:`{
  args: {},
  parameters: {
    mockData: [{
      url: 'http://localhost:8000/api/watchlist',
      method: 'GET',
      status: 200,
      response: []
    }]
  }
}`,...W.parameters?.docs?.source}}};const me=["Default","Loading","WithItems","Empty"];export{T as Default,W as Empty,C as Loading,P as WithItems,me as __namedExportsOrder,de as default};
