import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{u as T,E as $,g as N,f as E,a as I,b as q,c as n}from"./ErrorMessage-D6GXPr5r.js";import{L as V,I as C,B as L}from"./Button-CVhWGd89.js";import"./index-0yr9KlQE.js";import"./stockApi-Cf11MmaB.js";function w({stockData:u,currentPrice:p,loading:b=!1,error:f=null,onRefresh:h,onViewDetails:j,showWatchlistControls:_=!0,compact:a=!1,className:r=""}){const S=u?.stock_code||p?.stock_code||"",s=T(S),t=p||u,W=u?.company_name||"",v=p?.market_status;if(b)return e.jsx("div",{className:`stock-card ${r}`,children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(V,{size:"lg",showMessage:!0,message:"Ê†™Âºè„Éá„Éº„Çø„ÇíÂèñÂæó‰∏≠..."})})});if(f)return e.jsx("div",{className:`stock-card ${r}`,children:e.jsx($,{error:N(f),onRetry:h,retryText:"ÂÜçË™≠„ÅøËæº„Åø"})});if(!t)return e.jsx("div",{className:`stock-card ${r}`,children:e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Ê†™Âºè„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"})});const k=E(t.price_change),y=I(t.price_change_pct),c=v?q(v):null,D=async()=>{try{await s.toggleWatchlist()}catch(P){console.error("Failed to toggle watchlist:",P)}};return e.jsxs("div",{className:`stock-card ${a?"p-4":"p-6"} ${r}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`font-bold text-gray-900 ${a?"text-lg":"text-xl"}`,children:t.stock_code}),c&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm",children:c.icon}),e.jsx("span",{className:`text-xs font-medium ${c.colorClass}`,children:c.text})]})]}),e.jsx("p",{className:`text-gray-600 truncate ${a?"text-sm":"text-base"}`,children:W})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsx(C,{variant:"ghost",size:"sm",onClick:h,tooltip:"Êõ¥Êñ∞",children:"üîÑ"}),_&&e.jsx(C,{variant:s.isInWatchlist?"primary":"ghost",size:"sm",loading:s.isAdding||s.isRemoving,onClick:D,tooltip:s.isInWatchlist?"„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Åã„ÇâÂâäÈô§":"„Ç¶„Ç©„ÉÉ„ÉÅ„É™„Çπ„Éà„Å´ËøΩÂä†",children:s.isInWatchlist?"‚≠ê":"‚òÜ"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-baseline justify-between",children:e.jsx("div",{children:e.jsx("span",{className:`font-bold ${a?"text-2xl":"text-3xl"} text-gray-900`,children:n(t.current_price)})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${k.colorClass}`,children:k.formatted}),e.jsxs("span",{className:`font-medium ${y.colorClass}`,children:["(",y.formatted,")"]})]}),!a&&typeof t.previous_close=="number"&&e.jsxs("div",{className:"text-sm text-gray-500",children:["ÂâçÊó•ÊØî: ",n(t.previous_close)]})]}),_&&s.isInWatchlist&&s.item&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[(s.item.alert_price_high!==null||s.item.alert_price_low!==null)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"„Ç¢„É©„Éº„Éà‰æ°Ê†º:"}),e.jsxs("span",{className:"font-medium",children:[s.item.alert_price_high!==null&&e.jsxs("span",{className:"text-green-600",children:["‚¨ÜÔ∏è ",n(s.item.alert_price_high)," "]}),s.item.alert_price_low!==null&&e.jsxs("span",{className:"text-red-600",children:["‚¨áÔ∏è ",n(s.item.alert_price_low)]})]})]}),s.item.notes&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"„É°„É¢: "}),e.jsx("span",{children:s.item.notes})]})]})}),s.hasError&&e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-sm text-red-600",children:[N(s.hasError),e.jsx("button",{onClick:s.clearError,className:"ml-2 text-red-500 underline hover:no-underline",children:"Èñâ„Åò„Çã"})]})})]}),!a&&j&&e.jsx("div",{className:"mt-6",children:e.jsx(L,{variant:"outline",fullWidth:!0,onClick:j,children:"Ë©≥Á¥∞„ÇíË¶ã„Çã"})})]})}w.__docgenInfo={description:"",methods:[],displayName:"StockCard",props:{stockData:{required:!1,tsType:{name:"union",raw:"StockData | null",elements:[{name:"StockData"},{name:"null"}]},description:""},currentPrice:{required:!1,tsType:{name:"union",raw:"CurrentPriceResponse | null",elements:[{name:"CurrentPriceResponse"},{name:"null"}]},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},error:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},onRefresh:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showWatchlistControls:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},compact:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const A={title:"Stock/StockCard",component:w,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{compact:{control:"boolean"},loading:{control:"boolean"},showWatchlistControls:{control:"boolean"}}},x={stock_code:"7203",company_name:"„Éà„É®„ÇøËá™ÂãïËªäÊ†™Âºè‰ºöÁ§æ",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,volume:1e6,market_cap:3e12,day_high:2550,day_low:2480,year_high:2800,year_low:2200,avg_volume:9e5,pe_ratio:15.5,dividend_yield:2.5},g={stock_code:"7203",current_price:2500.5,previous_close:2450,price_change:50.5,price_change_pct:2.06,timestamp:"2023-10-27T10:00:00Z",market_status:"open"},o={args:{stockData:x,currentPrice:g}},i={args:{loading:!0}},l={args:{error:"Failed to fetch stock data"}},d={args:{stockData:x,currentPrice:g,compact:!0}},m={args:{stockData:x,currentPrice:g,showWatchlistControls:!1}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice
  }
}`,...o.parameters?.docs?.source}}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...i.parameters?.docs?.source}}};l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:`{
  args: {
    error: 'Failed to fetch stock data'
  }
}`,...l.parameters?.docs?.source}}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice,
    compact: true
  }
}`,...d.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    stockData: mockStockData,
    currentPrice: mockCurrentPrice,
    showWatchlistControls: false
  }
}`,...m.parameters?.docs?.source}}};const O=["Default","Loading","Error","Compact","WithoutWatchlistControls"];export{d as Compact,o as Default,l as Error,i as Loading,m as WithoutWatchlistControls,O as __namedExportsOrder,A as default};
